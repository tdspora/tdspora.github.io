"use strict";(self.webpackChunktdm_docs=self.webpackChunktdm_docs||[]).push([[135],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=l(n),h=a,m=d["".concat(c,".").concat(h)]||d[h]||u[h]||r;return n?o.createElement(m,s(s({ref:t},p),{},{components:n})):o.createElement(m,s({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var l=2;l<r;l++)s[l]=n[l];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8347:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var o=n(7462),a=(n(7294),n(3905));const r={title:"Create or Update Connections"},s=void 0,i={unversionedId:"config/connections/create-connections",id:"config/connections/create-connections",title:"Create or Update Connections",description:"Connection Parameters",source:"@site/docs/config/connections/create-connections.md",sourceDirName:"config/connections",slug:"/config/connections/create-connections",permalink:"/docs/config/connections/create-connections",draft:!1,tags:[],version:"current",frontMatter:{title:"Create or Update Connections"},sidebar:"docs",previous:{title:"Apache Spark Master and History Web UI",permalink:"/docs/config/clusters/application-monitoring"},next:{title:"Connection statuses",permalink:"/docs/config/connections/connection-status"}},c={},l=[{value:"Connection Parameters",id:"connection-parameters",level:2},{value:"Connection name",id:"connection-name",level:3},{value:"Connection description",id:"connection-description",level:3},{value:"Database type",id:"database-type",level:3},{value:"JDBC URL",id:"jdbc-url",level:3},{value:"Oracle",id:"oracle",level:4},{value:"PostgreSQL",id:"postgresql",level:4},{value:"Scheme",id:"scheme",level:3},{value:"Temporal tables scheme (source connections only)",id:"temporal-tables-scheme-source-connections-only",level:3},{value:"Post connect script",id:"post-connect-script",level:3},{value:"Proxy",id:"proxy",level:3},{value:"Authentication type",id:"authentication-type",level:3},{value:"Basic",id:"basic",level:4},{value:"SSL",id:"ssl",level:4},{value:"Kerberos",id:"kerberos",level:4},{value:"LDAP",id:"ldap",level:4},{value:"Encryption types",id:"encryption-types",level:3},{value:"None",id:"none",level:4},{value:"SSL",id:"ssl-1",level:4},{value:"User Properties",id:"user-properties",level:3},{value:"Connection Timeout",id:"connection-timeout",level:3},{value:"Test Connection",id:"test-connection",level:2},{value:"Save  Connection",id:"save--connection",level:2}],p={toc:l};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"connection-parameters"},"Connection Parameters"),(0,a.kt)("h3",{id:"connection-name"},"Connection name"),(0,a.kt)("p",null,"Required."),(0,a.kt)("p",null,"Free form name of the connection. For better navigation, the connection name might include name of the database server, the connection user name, default database or schema."),(0,a.kt)("h3",{id:"connection-description"},"Connection description"),(0,a.kt)("p",null,"Connection description might have additional information about the connection. For example, the connection owner, permissions assigned to the database user, password expiration date and any other."),(0,a.kt)("h3",{id:"database-type"},"Database type"),(0,a.kt)("p",null,"Required. "),(0,a.kt)("p",null,"Type of the database connection."),(0,a.kt)("p",null,"Currently supported types are"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Version"),(0,a.kt)("th",{parentName:"tr",align:null},"Supported"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Oracle"),(0,a.kt)("td",{parentName:"tr",align:null},"11g"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"PostgreSQL"),(0,a.kt)("td",{parentName:"tr",align:null},"13"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes")))),(0,a.kt)("h3",{id:"jdbc-url"},"JDBC URL"),(0,a.kt)("p",null,"Required."),(0,a.kt)("p",null,"The format of the URL depends on the database type selected. You can find detailed description of the available options in the database vendor documents."),(0,a.kt)("h4",{id:"oracle"},"Oracle"),(0,a.kt)("p",null,"By Service Name"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"jdbc:oracle:thin:@//<host>:<port, 1521>/<Service name>\n")),(0,a.kt)("p",null,"By SID"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"jdbc:oracle:thin:@//<host>:<port, 1521>:<SID>\n")),(0,a.kt)("p",null,"By TNS"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"jdbc:oracle:thin:@(DESCRIPTION=(LOAD_BALANCE=on)\n  (ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=host1)(PORT=5221))\n                (ADDRESS=(PROTOCOL=TCP)(HOST=host2)(PORT=5221)))\n  (CONNECT_DATA=(SERVICE_NAME=orcl)))\n")),(0,a.kt)("p",null,"See more in ",(0,a.kt)("a",{parentName:"p",href:"https://docs.oracle.com/en/database/oracle/oracle-database/18/jjdbc/data-sources-and-URLs.html"},"JDBC Developer's Guide"),"."),(0,a.kt)("h4",{id:"postgresql"},"PostgreSQL"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"jdbc:postgresql://<host>:<port, 5432>/database\n")),(0,a.kt)("p",null,"See more in ",(0,a.kt)("a",{parentName:"p",href:"https://jdbc.postgresql.org/documentation/head/connect.html"},"Connecting to the Database"),"."),(0,a.kt)("h3",{id:"scheme"},"Scheme"),(0,a.kt)("p",null,"Default scheme that the connection use to access tables in the source or target database."),(0,a.kt)("p",null,"You can override the scheme in the post-connection script or leave it empty to use database default schema name."),(0,a.kt)("p",null,"For example, in Oracle the post script might look"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'alter session set current_schema = "my.special.scheme"\n')),(0,a.kt)("p",null,"If scheme enclosed in double quotes, the name will be used as is. Such names can have special, national, and case sensitive characters or special words. Nevertheless, this is not recommended and might cause issues access such tables with various tools that does not support the feature."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Create connection",src:n(9876).Z,width:"1188",height:"774"})),(0,a.kt)("h3",{id:"temporal-tables-scheme-source-connections-only"},"Temporal tables scheme (source connections only)"),(0,a.kt)("p",null,'Name of the database schema the connection user has permissions to create and drop tables, insert rows into the created tables. The connection will be marked as "Limited" if the user has no such permissions.'),(0,a.kt)("p",null,"We use temporal tables to:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Collect IDs of records to copy"),(0,a.kt)("li",{parentName:"ul"},"Optimize access delays to the source data"),(0,a.kt)("li",{parentName:"ul"},"Minimize the volume of data to transfer between database and the Spark cluster.")),(0,a.kt)("p",null,"The schema should have enough space to store the intermediate results that can take roughly 10% of the data volume to transfer."),(0,a.kt)("p",null,"If the value is not set, user's default schema will be used for temporal tables creation."),(0,a.kt)("p",null,"The user should have at least following permissions:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create and Alter a table in the schema for temporal tables"),(0,a.kt)("li",{parentName:"ul"},"Insert records into the tables"),(0,a.kt)("li",{parentName:"ul"},"Drop the tables.")),(0,a.kt)("p",null,"If you don't specify the temporal schema name, we will use default schema for the connection user. The post connect script does not affect the temporal schema."),(0,a.kt)("h3",{id:"post-connect-script"},"Post connect script"),(0,a.kt)("p",null,"We will execute the script as the last step to establish the connection. We strongly recommend to keep it as small and light as possible. We cannot predict how many times we will execute the script."),(0,a.kt)("p",null,"You can use it to fine-tune database session parameters, setting default date and time formats, or changing default schema."),(0,a.kt)("p",null,"You can add few SQL statements in one script. The statements must start from the new line and end with semicolon (;)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"alter session set current_schema = \"my.special.scheme\";\nALTER SESSION SET NLS_LANGUAGE= 'AMERICAN'\nNLS_TERRITORY= 'AMERICA'\nNLS_CURRENCY= '$'\nNLS_ISO_CURRENCY= 'AMERICA'\nNLS_NUMERIC_CHARACTERS= '.,'\nNLS_CALENDAR= 'GREGORIAN'\nNLS_DATE_FORMAT= 'DD-MON-RR'\nNLS_DATE_LANGUAGE= 'AMERICAN'\nNLS_SORT= 'BINARY';\n")),(0,a.kt)("h3",{id:"proxy"},"Proxy"),(0,a.kt)("p",null,"TBD"),(0,a.kt)("h3",{id:"authentication-type"},"Authentication type"),(0,a.kt)("h4",{id:"basic"},"Basic"),(0,a.kt)("p",null,"User authenticated with combination of the user name and password fields."),(0,a.kt)("h4",{id:"ssl"},"SSL"),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"The SSL Authentication method for Oracle and PostgreSQL connections require the SSL encryption enabled and a valid server certificate provided.")),(0,a.kt)("p",null,"You can authenticate in the source or target database using trusted certificate. We store the certificate along with the connection and send it to Spark cluster in the password protected Java Key Store format (JKS)."),(0,a.kt)("p",null,"The connection configuration page accepts user certificate chains in the X.509 and user certificate chains in the RSA (",(0,a.kt)("a",{parentName:"p",href:"https://www.openssl.org/docs/man1.1.0/man1/pkcs8.html"},"PKCS#8"),") formats:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Bag Attributes\nlocalKeyID: 27 C4 A6 71 C6 94 4C FF 0C 8D DD 37 5C 83 D2 F6 5B 88 F6 5E\nsubject=/C=US/ST=secuser/L=secuser/O=secuser/OU=secuser/CN=secuser\nissuer=/C=US/ST=rootCA/L=rootCA/O=rootCA/OU=rootCA/CN=rootCA\n-----BEGIN CERTIFICATE-----\nMIIDRTCCAi0CCQDQpKNLZxPVOzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJV\nUzEPMA0GA1UECAwGcm9vdENBMQ8wDQYDVQQHDAZyb290Q0ExDzANBgNVBAoMBnJv\n\n...\n\nv5Am9XNvKVPwTEWsiAh+19gahw6waNnQ9shy+U+1q03HO2CEXIFpyp4KsMwVGG56\np6Bu1Ibwcj+KBZtc6f1knOuTP/AveCTYTA==\n-----END CERTIFICATE-----\nBag Attributes: <No Attributes>\nsubject=/C=US/ST=rootCA/L=rootCA/O=rootCA/OU=rootCA/CN=rootCA\nissuer=/C=US/ST=rootCA/L=rootCA/O=rootCA/OU=rootCA/CN=rootCA\n-----BEGIN CERTIFICATE-----\nMIIDlzCCAn+gAwIBAgIJAOc2bAZ4pWEPMA0GCSqGSIb3DQEBCwUAMGIxCzAJBgNV\nBAYTAlVTMQ8wDQYDVQQIDAZyb290Q0ExDzANBgNVBAcMBnJvb3RDQTEPMA0GA1UE\n\n...\n\nnCuzEFBF6RY6+LA=\n-----END CERTIFICATE-----\nBag Attributes\nlocalKeyID: 27 C4 A6 71 C6 94 4C FF 0C 8D DD 37 5C 83 D2 F6 5B 88 F6 5E\nKey Attributes: <No Attributes>\n-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQClMVwNTVsrXR6G\niLNrAyEUbbTLbIz/ZQLgpodhUOYi+mgvPchq0FsAvUYS4yQIClTgA8XnEcvXl+ky\n\n...\n\n9No9g3zefukCsbdDwo5HocxSWvGsBMFK9NqY24KI1LooacGStRJ7A0ivnudYkYcu\n4BYENOv+U9N8B8I0UXkX0Mc=\n-----END PRIVATE KEY-----\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Oracle")," SSL authentication requires additional connection parameters. At least the authentication service must be specified, for example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"oracle.net.authentication_services=(TCPS)\n")),(0,a.kt)("p",null,"If you mix fully qualified domain names and short server name make sure you disable DN matching"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"oracle.net.ssl_server_dn_match=false\n")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"SSL Authentication",src:n(1169).Z,width:"1232",height:"736"})),(0,a.kt)("p",null,"See more in ",(0,a.kt)("a",{parentName:"p",href:"https://docs.oracle.com/database/121/DBSEG/asossl.htm#DBSEG070"},"Oracle - Configuring Secure Sockets Layer Authentication"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"PostgreSQL")," SSL authentication is similar to Oracle, but requires no additional properties. However, you can fine tune the connection using parameters described in details in the below document."),(0,a.kt)("p",null,"See more in ",(0,a.kt)("a",{parentName:"p",href:"https://jdbc.postgresql.org/documentation/head/ssl-client.html"},"PostgreSQL - Configuring the Client"),"."),(0,a.kt)("h4",{id:"kerberos"},"Kerberos"),(0,a.kt)("h4",{id:"ldap"},"LDAP"),(0,a.kt)("p",null,"TBD"),(0,a.kt)("h3",{id:"encryption-types"},"Encryption types"),(0,a.kt)("h4",{id:"none"},"None"),(0,a.kt)("p",null,"No encryption between database server and the tool enabled. It is not recommended for connections to the production environments."),(0,a.kt)("h4",{id:"ssl-1"},"SSL"),(0,a.kt)("p",null,"You can provide trusted server certificate and make the connection between the database server and the tool secure."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"TODO"),': Add the "How to extract server certificate from Oracle and PostgreSQL" section here.'),(0,a.kt)("h3",{id:"user-properties"},"User Properties"),(0,a.kt)("p",null,"You can define custom JDBC driver properties and pass them directly to the driver."),(0,a.kt)("p",null,"We do not validate if the properties supported by the driver, and do not recommend to share secrets in the properties section."),(0,a.kt)("p",null,"Please find additional details on the supported driver properties in the respective JDBC drivers documentation below."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/jdbc/OracleDriver.html"},"Oracle Driver"),"."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://jdbc.postgresql.org/documentation/head/connect.html"},"PostgreSQL - Connection to the Database"),"."),(0,a.kt)("h3",{id:"connection-timeout"},"Connection Timeout"),(0,a.kt)("p",null,"By default the connection timeout depends on the connection setting."),(0,a.kt)("p",null,"Secured connections capture global default SSL context and have only 5 seconds to complete, while normal connections timeout is 60 seconds. You can define user property to change the default behavior."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"com.epam.tdm.jdbc.connectionTimeout\n")),(0,a.kt)("h2",{id:"test-connection"},"Test Connection"),(0,a.kt)("p",null,"TBD"),(0,a.kt)("h2",{id:"save--connection"},"Save  Connection"),(0,a.kt)("p",null,"TBD"))}u.isMDXComponent=!0},9876:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/create-source-connection-49058b88b0decd97b2ac60fd570b3af0.png"},1169:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/oracle-ssl-auth-160782a66916a4f14f28818a85ceab00.png"}}]);