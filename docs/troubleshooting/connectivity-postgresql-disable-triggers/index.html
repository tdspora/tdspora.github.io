<!doctype html>
<html lang="en" dir="ltr" class="plugin-docs plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">PostgreSQL - disable triggers | TDSpora</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:image" content="https://raw.githubusercontent.com/tdspora/tdspora.github.io/main/img/logo-icon-open-graph.png"><meta data-rh="true" property="og:title" content="PostgreSQL - disable triggers | TDSpora"><meta data-rh="true" name="description" content="PostgreSQL: error for ALTER TABLE DISABLE TRIGGERS ALL statement execusion by user without enough permission"><meta data-rh="true" property="og:description" content="PostgreSQL: error for ALTER TABLE DISABLE TRIGGERS ALL statement execusion by user without enough permission"><meta data-rh="true" property="og:url" content="https://tdspora.github.io/docs/troubleshooting/connectivity-postgresql-disable-triggers"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://tdspora.github.io/docs/troubleshooting/connectivity-postgresql-disable-triggers" hreflang="en"><link data-rh="true" rel="alternate" href="https://tdspora.github.io/docs/troubleshooting/connectivity-postgresql-disable-triggers" hreflang="x-default"><link data-rh="true" rel="alternate" href="https://tdspora.ai//docs/troubleshooting/connectivity-postgresql-disable-triggers"><link data-rh="true" rel="alternate" href="https://tdspora.ai//docs/troubleshooting/connectivity-postgresql-disable-triggers"><link data-rh="true" rel="canonical" href="https://tdspora.ai//docs/troubleshooting/connectivity-postgresql-disable-triggers"><script src="https://tdspora.ai/scripts/scriptAtlassian1.js" defer="defer" data-key="a2de66ac-0fd7-4bd8-85c9-f3760fccc23e" data-jsd-embedded="" data-base-url="https://jsd-widget.atlassian.com"></script><link rel="stylesheet" href="/assets/css/styles.8003281c.css">
<link rel="preload" href="/assets/js/runtime~main.be6ef13e.js" as="script">
<link rel="preload" href="/assets/js/main.51bfa353.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><header class="fixed top-0 inset-x-0 z-50 h-nav header_DiDm"><div class="absolute top-0 left-0 z-40 w-full shadow-navBar"><nav class="flex items-center justify-between h-nav navigationContainer"><a href="/"><img src="/img/logo.svg" alt="logo"></a><div class="lg:flex items-center"><ul class="invisible lg:visible fixed lg:static flex flex-row gap-6 items-center"><li><a style="text-decoration:none" class="flex items-center h-22 text-16 text-monochrome-default tab_hkiA" href="/features">Features</a></li><li><a style="text-decoration:none" class="flex items-center h-22 text-16 text-monochrome-default tab_hkiA" href="/plans">Plans</a></li><li><a style="text-decoration:none" class="flex items-center h-22 text-16 text-monochrome-default activeTab_WWS9" href="/docs/introduction">Docs</a></li><li><a style="text-decoration:none" class="flex items-center h-22 text-16 text-monochrome-default tab_hkiA" href="/contact">Contact us</a></li><li><a href="https://github.com/tdspora/syngen" target="_blank" rel="noopener noreferrer" class="githubLink_dud9"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img"><path clip-rule="evenodd" d="M11.999 0C5.373 0 0 5.509 0 12.304 0 17.74 3.438 22.351 8.207 23.98c.6.113.819-.267.819-.594 0-.292-.01-1.066-.017-2.092-3.337.743-4.042-1.65-4.042-1.65-.545-1.421-1.332-1.8-1.332-1.8-1.09-.762.082-.747.082-.747 1.205.087 1.838 1.268 1.838 1.268 1.07 1.88 2.81 1.337 3.493 1.022.109-.795.419-1.337.762-1.644-2.665-.312-5.467-1.367-5.467-6.081 0-1.344.468-2.442 1.236-3.302-.124-.311-.536-1.562.118-3.256 0 0 1.007-.33 3.3 1.26A11.258 11.258 0 0 1 12 5.95a11.27 11.27 0 0 1 3.005.414c2.29-1.592 3.296-1.261 3.296-1.261.655 1.694.243 2.945.12 3.256.77.86 1.233 1.958 1.233 3.302 0 4.726-2.806 5.766-5.478 6.07.43.38.814 1.131.814 2.28 0 1.644-.015 2.97-.015 3.374 0 .33.217.712.825.592 4.765-1.63 8.2-6.238 8.2-11.673C24 5.51 18.627 0 11.999 0z"></path></svg><div class="githubStarsCount_ehdJ"><span class="text-monochrome-text font-regular">+<!-- -->0</span></div></a></li><li><a style="text-decoration:none" class="button-primary ml-5 px-8" href="/contact">Request demo</a></li></ul><button aria-label="menu button" class="flex items-center justify-center w-9 h-9 lg:hidden text-monochrome-black fill-current bg-menu bg-no-repeat" type="button"></button></div></nav></div></header><div class="main-wrapper mainWrapper_z2l0"><div class="docPageContainer_vFwC"><div class="background_rNR4"></div><div class="flex flex-col lg:pt-6 lg:pl-6 lg:border-r border-none" role="complementary"><button aria-label="Open Menu" aria-haspopup="true" class="button--documentation-menu-open" type="button"><span style="background-image:url(/img/documentation-menu.svg);min-width:24px;min-height:24px;display:inline-block"></span><div>Documentation menu</div></button><div class="search-bar-icon"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div><div id="searchLoupe"></div></div><div class="menu px-6 lg:px-0"></div></div><main class="grid grid-cols-12 gap-x-5 mb-22"><article class="col-span-12 lg:col-start-2 lg:col-span-8 mt-30 lg:mt-1" style="max-width:100%"><header><h1 class="mt-8 mb-4 text-44 font-ubuntu leading-48 text-monochrome-text">PostgreSQL - disable triggers</h1></header><div class="markdown"><p><strong>PostgreSQL: error for ALTER TABLE DISABLE TRIGGERS ALL statement execusion by user without enough permission</strong></p><p>The case is:</p><p>User has transferred tables to the database of PostgreSQL with Subsetting integrity type.
So, foreign keys are available on the target database.</p><p>Then the user selects the same tables, but transferring them with Migration integrity type and target filling mode as Truncate or Append.</p><p>During the pipeline execution, the back-end side runs the statement to disable the foreign keys: ALTER TABLE &lt;table_name&gt; DISABLE TRIGGERS ALL;.</p><p>In case the user selected for target connection does not have enough permission, the statement is not executed. And the foreign keys leave enabled.</p><p>The pipeline could be failed as far as database didn&#x27;t allow to insert the values without reference:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: insert or update on table &quot;&lt;table_name&gt;&quot; violates foreign key constraint &quot;&lt;constraint_name&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Detail: Key (&lt;column_name&gt;)=(&lt;value_id&gt;) is not present in table &quot;&lt;table_name&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Solution:</p><ol><li><p>User on target database has to have enough permission to execute the ALTER TABLE &lt;table_name&gt; DISABLE TRIGGERS ALL;</p></li><li><p>Disable the foreign keys on the target manually before the pipeline execution with Migration integrity type and enable the keys manually after the pipeline finished.</p></li></ol><hr><p><strong>Last updated:</strong> January 03, 2022.
<strong>Applies to:</strong> All users.</p><p><em>Issue description and steps to reproduce goes here.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="symptoms">Symptoms<a class="hash-link" href="#symptoms" title="Direct link to heading">â€‹</a></h3><ol><li><p>User has transferred tables to the database of PostgreSQL with Subsetting integrity type. So, foreign keys are available on the target database.</p></li><li><p>Then the user selects the same tables, but transferring them with Migration integrity type and target filling mode as Truncate or Append.</p></li><li><p>During the pipeline execution, the back-end side runs the statement to disable the foreign keys: ALTER TABLE &lt;table_name&gt; DISABLE TRIGGERS ALL;.</p></li><li><p>In case the user selected for target connection does not have enough permission, the statement is not executed. And the foreign keys leave enabled.</p></li><li><p>The pipeline could be failed as far as database didn&#x27;t allow to insert the values without reference:</p></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: insert or update on table &quot;&lt;table_name&gt;&quot; violates foreign key constraint &quot;&lt;constraint_name&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Detail: Key (&lt;column_name&gt;)=(&lt;value_id&gt;) is not present in table &quot;&lt;table_name&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cause">Cause<a class="hash-link" href="#cause" title="Direct link to heading">â€‹</a></h3><p>PostgreSQL: error for ALTER TABLE DISABLE TRIGGERS ALL statement execusion by user without enough permission</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="solution">Solution<a class="hash-link" href="#solution" title="Direct link to heading">â€‹</a></h3><p><em>Detailed solution goes here.</em></p><ol><li>User on target database has to have enough permission to execute the <code>ALTER TABLE &lt;table_name&gt; DISABLE TRIGGERS ALL;</code> statements before starting a pipeline.</li></ol><p>or</p><ol start="2"><li>Disable the foreign keys on the target manually before the pipeline execution with Migration integrity type and enable the keys manually after the pipeline finished.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workaround">Workaround<a class="hash-link" href="#workaround" title="Direct link to heading">â€‹</a></h3><p><em>Optional. Provide steps to workaround the issue.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="related-articles">Related Article(s)<a class="hash-link" href="#related-articles" title="Direct link to heading">â€‹</a></h3><p><em>Include the links and titles for any knowledge base articles related to this one.</em>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="was-this-article-helpful">Was This Article Helpful?<a class="hash-link" href="#was-this-article-helpful" title="Direct link to heading">â€‹</a></h3><p><em>Include a way for readers to let you know whether or not the content was helpful. This can be a yes/no or thumbs up/thumbs down feature, a 1-5 rating, or a link to provide feedback through email or a survey.</em>  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="still-need-help">Still Need Help?<a class="hash-link" href="#still-need-help" title="Direct link to heading">â€‹</a></h3><p><em>Provide a way for customers to get in touch with you if they still have questions. This can be a link to your support page, a chat popup, or the email address for the best person to reach out to.</em>  </p><hr><p><strong>Knowledge Base Article</strong> <strong>Best Practices Checklist:</strong></p><ul><li>Did you run this process by a customer or a fellow employee to see if he or she is able to follow along?</li><li>Do you use visual aids such as images, videos, and/or GIFs where appropriate?</li><li>Do you explain the process directly, clearly, and concisely, without unnecessary filler words?</li><li>Do you provide related articles for similar issues or topics?</li><li>Do you provide continued contact information for readers who still need help?</li><li>Did you set a reminder to revisit this article periodically to ensure that the content is accurate and up-to-date?</li></ul><p><a href="https://kb.epam.com/display/EPMCTDM/Knowledge+Base+Articles+for+End-Users" target="_blank" rel="noopener noreferrer">Knowledge Base Articles for End-Users</a></p></div></article></main></div></div><footer class="bg-monochrome-Gray100 border-monochrome-medium-tint"><div class="fotterContainer_aN_H"><section class="mainSection_V0Hi"><a href="/"><img src="/img/logo-fotter.svg" class="logoFotter_AVem" alt="TDSpora"><img src="/img/tdspora-icon-fotter.svg" class="tdsporaIconFotter_u7ul" alt="TDSpora"></a><div class="linksContainer_itM2"><div class="columnContainer_Zf8D"><div class="title_gHmw">Product</div><ul><li class="link_G08R"><a href="/features">Features</a></li><li class="link_G08R"><a href="/plans">Plans</a></li></ul></div><div class="columnContainer_Zf8D"><div class="title_gHmw">Support</div><ul><li class="link_G08R"><a href="/docs/introduction">Docs</a></li><li class="link_G08R"><a href="/contact">Contact us</a></li><li class="link_G08R"><a href="/docs/faq">FAQ</a></li></ul></div><div class="columnContainer_Zf8D"><div class="title_gHmw">Legal</div><ul><li class="link_G08R"><a href="/docs/legal/EULA">License Agreement</a></li><li class="link_G08R"><a href="https://www.epam.com/privacy-policy" target="_blank" rel="noopener noreferrer">Privacy Policy</a></li></ul></div></div></section><section class="flex flex-row gap-y-4 py-5 border-t border-monochrome-medium-tint flex-row justify-between"><span class="flex flex-row gap-y-2 items-center gap-x-2 text-16 leading-24 text-monochrome-text">Sponsored by<a href="https://solutionshub.epam.com/solution/tdspora" target="_blank" rel="noopener noreferrer"><img src="/img/epam-logo.svg" alt="epam systems logo"></a></span><a href="https://github.com/tdspora/tdspora.github.io" target="_blank" rel="noopener noreferrer" class="githubLink_rgoe"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img"><path clip-rule="evenodd" d="M11.999 0C5.373 0 0 5.509 0 12.304 0 17.74 3.438 22.351 8.207 23.98c.6.113.819-.267.819-.594 0-.292-.01-1.066-.017-2.092-3.337.743-4.042-1.65-4.042-1.65-.545-1.421-1.332-1.8-1.332-1.8-1.09-.762.082-.747.082-.747 1.205.087 1.838 1.268 1.838 1.268 1.07 1.88 2.81 1.337 3.493 1.022.109-.795.419-1.337.762-1.644-2.665-.312-5.467-1.367-5.467-6.081 0-1.344.468-2.442 1.236-3.302-.124-.311-.536-1.562.118-3.256 0 0 1.007-.33 3.3 1.26A11.258 11.258 0 0 1 12 5.95a11.27 11.27 0 0 1 3.005.414c2.29-1.592 3.296-1.261 3.296-1.261.655 1.694.243 2.945.12 3.256.77.86 1.233 1.958 1.233 3.302 0 4.726-2.806 5.766-5.478 6.07.43.38.814 1.131.814 2.28 0 1.644-.015 2.97-.015 3.374 0 .33.217.712.825.592 4.765-1.63 8.2-6.238 8.2-11.673C24 5.51 18.627 0 11.999 0z"></path></svg></a></section></div></footer></div>
<script src="/assets/js/runtime~main.be6ef13e.js"></script>
<script src="/assets/js/main.51bfa353.js"></script>
</body>
</html>